(function(e,t){if(!localStorage in t){console.log("Could not find localStorage.");return}e.fn.formalia=function(t){function n(t,n){var r=n.UIC(t);var i=JSON.parse(localStorage.getItem(r));if(!i||typeof i!=="object")return;for(field in i){e(t).find("[name="+field+"]").prop("value",i[field])}e(t).trigger("formRestore",{fieldsRestored:i})}function r(t,n){var r=n.UIC(t);var i=JSON.parse(localStorage.getItem(r));if(!i||typeof i!=="object")i={};e(t).on("change",function(t){var n=e(t.target),s=n.prop("name"),o=n.prop("value");i[s]=o;localStorage.setItem(r,JSON.stringify(i))}).on(n.submitEvent,function(e){localStorage.removeItem(r)})}function i(e,t){debugger}if(typeof t==="string"){debugger;switch(t){case"reset":if(this[0].tagName==="FORM")this.trigger("reset");else this.find("form").each(function(){e(this).trigger("reset")});break}return}var s={UIC:function(n){return e(n).attr("id")+"_"+e(n).attr("name")},submitEvent:"submit"};if(typeof t==="object")e.extend(s,t);this.each(function(){switch(this.tagName){case"FORM":n(this,s);r(this,s);break;default:i(this,s);break}})}})(jQuery,window);